"use strict";(self.webpackChunkmean_front_AFDC=self.webpackChunkmean_front_AFDC||[]).push([[712],{712:(C,p,u)=>{u.r(p),u.d(p,{TaskModule:()=>_});var h=u(9808),c=u(3476),a=u(2382),t=u(1223),m=u(7556),l=u(520),T=u(2340);let g=(()=>{class r{constructor(e){this.http=e,this.baseUrl=T.N.baseUrl,this._user=JSON.parse(localStorage.getItem("user"))}get user(){return this._user}read(){const e=(new l.WM).set("x-auth-token",this.user.token);return this.http.get(`${this.baseUrl}/task/read`,{headers:e})}delete(e){const n=(new l.WM).set("x-auth-token",this.user.token);return this.http.delete(`${this.baseUrl}/task/delete/${e}`,{headers:n})}create(e){const n=(new l.WM).set("x-auth-token",this.user.token);return this.http.post(`${this.baseUrl}/task/create`,{nombre:e},{headers:n})}update(e,n){const s=(new l.WM).set("x-auth-token",this.user.token);return this.http.put(`${this.baseUrl}/task/update/${n}`,{nombre:e},{headers:s})}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(l.eN))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function k(r,o){if(1&r){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"i",12),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw().update(i)}),t._uU(5,"create"),t.qZA()(),t.TgZ(6,"td")(7,"i",13),t.NdJ("click",function(){const i=t.CHM(e).$implicit;return t.oxw().delete(i._id)}),t._uU(8,"delete"),t.qZA()()()}if(2&r){const e=o.$implicit;t.xp6(2),t.Oqu(e.nombre)}}const f=[{path:"",component:(()=>{class r{constructor(e,n,s,i){this._authService=e,this._crudService=n,this.router=s,this.fb=i,this.tasks=[],this.newTask="",this.formulario=i.group({tarea:["",[a.kI.required]]})}ngOnInit(){this.user=this._crudService.user,this.cargarTareas()}logout(){localStorage.clear(),this.router.navigateByUrl("/auth")}delete(e){this._crudService.delete(e).subscribe(n=>{this.cargarTareas()})}create(){this._crudService.create(this.newTask).subscribe(e=>this.cargarTareas()),this.formulario.reset()}update(e){const{_id:n,nombre:s}=e;this.router.navigateByUrl(`/task/${n}/${s}`)}cargarTareas(){this._crudService.read().subscribe(e=>this.tasks=e.tareas)}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m.e),t.Y36(g),t.Y36(c.F0),t.Y36(a.qu))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-main-task"]],decls:29,vars:4,consts:[[1,"nav-wrapper"],["href","#",1,"brand-logo",2,"margin-left","20px !important"],["id","nav-mobile",1,"right","hide-on-med-and-down"],[1,"waves-effect","waves-light","btn",2,"margin-right","40px !important",3,"click"],[1,"container",3,"formGroup","ngSubmit"],[1,"row"],[1,"input-field","col","s6"],["formControlName","tarea","form","","id","create","type","text",1,"validate",3,"ngModel","ngModelChange"],["for","create",1,"active"],[1,"waves-effect","waves-light","btn",3,"disabled"],[1,"container"],[4,"ngFor","ngForOf"],[1,"material-icons","blue-text","iconos",3,"click"],[1,"material-icons","red-text","iconos",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"nav")(1,"div",0)(2,"span",1),t._uU(3,"Tareas"),t.qZA(),t.TgZ(4,"ul",2)(5,"li")(6,"button",3),t.NdJ("click",function(){return n.logout()}),t._uU(7,"Logout"),t.qZA()()()()(),t.TgZ(8,"form",4),t.NdJ("ngSubmit",function(){return n.create()}),t.TgZ(9,"div",5)(10,"div",6)(11,"input",7),t.NdJ("ngModelChange",function(i){return n.newTask=i}),t.qZA(),t.TgZ(12,"label",8),t._uU(13,"Nueva Tarea"),t.qZA()(),t.TgZ(14,"div",6)(15,"button",9),t._uU(16,"Agregar"),t.qZA()()()(),t.TgZ(17,"div",10)(18,"table")(19,"thead")(20,"tr")(21,"th"),t._uU(22,"Nombre"),t.qZA(),t.TgZ(23,"th"),t._uU(24,"Actualizar"),t.qZA(),t.TgZ(25,"th"),t._uU(26,"Eliminar"),t.qZA()()(),t.TgZ(27,"tbody"),t.YNc(28,k,9,1,"tr",11),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("formGroup",n.formulario),t.xp6(3),t.Q6J("ngModel",n.newTask),t.xp6(4),t.Q6J("disabled",n.formulario.invalid),t.xp6(13),t.Q6J("ngForOf",n.tasks))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,h.sg],styles:[".iconos[_ngcontent-%COMP%]{cursor:pointer}"]}),r})()},{path:":id/:nombre",component:(()=>{class r{constructor(e,n,s,i,d){this._authService=e,this._crudService=n,this.router=s,this.fb=i,this.route=d,this.newTask="",this.route.params.subscribe(b=>{this.task=b,console.log(this.task),this.newTask=this.task.nombre}),this.formulario=i.group({tarea:[this.newTask,[a.kI.required]]})}ngOnInit(){this.user=this._crudService.user}update(){this._crudService.update(this.newTask,this.task.id).subscribe({next:e=>console.log(e.ok),complete:()=>this.router.navigateByUrl("/task")})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m.e),t.Y36(g),t.Y36(c.F0),t.Y36(a.qu),t.Y36(c.gz))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-task-update"]],decls:13,vars:3,consts:[[1,"container"],[1,"container",3,"formGroup","ngSubmit"],[1,"row"],[1,"input-field","col","s6"],["formControlName","tarea","form","","id","create","type","text",1,"validate",3,"ngModel","ngModelChange"],["for","create",1,"active"],[1,"waves-effect","waves-light","btn",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Update"),t.qZA(),t._UZ(3,"hr"),t.qZA(),t.TgZ(4,"form",1),t.NdJ("ngSubmit",function(){return n.update()}),t.TgZ(5,"div",2)(6,"div",3)(7,"input",4),t.NdJ("ngModelChange",function(i){return n.newTask=i}),t.qZA(),t.TgZ(8,"label",5),t._uU(9,"Nueva Tarea"),t.qZA()(),t.TgZ(10,"div",3)(11,"button",6),t._uU(12,"Actualizar"),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("formGroup",n.formulario),t.xp6(3),t.Q6J("ngModel",n.newTask),t.xp6(4),t.Q6J("disabled",n.formulario.invalid))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u],styles:[""]}),r})()},{path:"**",redirectTo:""}];let v=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[c.Bz.forChild(f)],c.Bz]}),r})(),_=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[[h.ez,v,a.u5,a.UX]]}),r})()}}]);